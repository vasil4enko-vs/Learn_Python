# 3.4. Спецсимволы и экранирование символов

После того как мы изучили строки, их методами, пришло время узнать какие специальные символы могут содержать строки в Python.

С одним из них мы уже сталкивались. это символ перевода строки.

## 3.4.1. Символ перевода строки `\n`

**Специальный символ `\n`** - символ переноса строки.

Я напомню, что когда мы создаём многострочный текст, например:

```python
>>> text = """hello
... world"""
>>> text
'hello\npython'
>>>print(text)
hello
python
>>>
```

то, если мы выведем переменную `text` в консоль, то мы получим на месте перевода строки символы `\n`. Т.е. именно так он определяется в строке. И когда функция `print()` встречает этот символ `\n`, то она соответственно делает переход на следующую строку. Таким образом, представляются многострочный строки, с помощью этого специального символа `\n`. Причём это один символ. Так если мы вычислим длину строки `text`:

```python
>>> len(text)
12
>>>
```

то получим значение `12`. И если мы сами посчитаем символы в строке `text`, то получим:

- `hello` = 5 символов;
- `python` = 6 символов;
- `\n` = 1 символ.

Всего = 12 символов.

Как видите `\n` воспринимается как 1 символ, не сморя на то, что чисто визуально мы видим два символа.

Именно так и следует воспринимать символ `\n` - как один отдельный специальный символ перевода строки.

Также мы можем задавать перевод строки в явном виде:

```python
>>> t = "panda needs\npython"
>>> t
'panda needs\npython'
>>>print(t)
panda needs
python
>>>
```

Как вы видите вызов переменной `t` содержит символ перевода строки. Функция `print()` выводит часть строки `panda needs` до символа `\n`, затем на месте этого символа осуществляется переход на следующую строку и оставшаяся часть строки `python` распечатается уже с новой строки.

Вообще, в строках языка Python можно прописывать следующие спецсимволы:

|Обозначение | Описание |
|:----------:|:--------:|
| `\n` | Символ перевода строки |
| `\\` | Символ обратного слэша |
| `\'` | Символ кавычки |
| `\"` | Символ двойной кавычки |
| `\a` | Символ аппаратного звука |
| `\b` | Эмуляция клавиши BackSpace |
| `\f` | Перевод формата  |
| `\r` | Возврат каретки |
| `\t` | Символ горизонтальной табуляции |
| `\v` | Символ вертикальной табуляции |
| `\0` | Символ Null (не признак конца строки)  |
| `\xhh` | Символ шестнадцатеричным кодом |
| `\ooo` | Символ c восьмеричным кодом |
| `\N{id}` | Идентификатор из кодовой таблицы Unicode |
| `\Uhhhhhhhh` | 32-битный символ Unicode в шестнадцатеричной форме |
| `\другое` | Не является экранированной последовательностью |

Но запоминать их все необязательно. Мы рассмотрим наиболее употребляемые из них.

Чаще всего используются:

- `\n` - символ перевода строки;
- `\\` - символ обратного слэша;
- `\'` - символ кавычки;
- `\"` - символ двойной кавычки;
- `\t` - символ горизонтальной табуляции.

Остальные символы используются гораздо реже.

И обратите внимание перед каждый специальный начинается с обратного слэша `\`. Это своего рода маркер начала спецсимвола. И если после обратного символа идёт одно из обозначений спецсимвола, то всё это будет восприниматься как соответствующий спецсимвол.

Рассмотрим это на конкретных примерах.

## 3.4.2. Символ горизонтальной табуляции `\t`

**Специальный символ `\t`** - символ горизонтальной табуляции.

Для примера рассмотрим следующую строку, поставив в её начало спецсимвол `\t` и посмотрим, как будет выводиться эта строка:

```python
>>> t = "\tpanda needs\npython"
>>> t
'\tpanda needs\npython'
>>> print(t)
    panda needs
python
>>>
```

Вы видите, что при выводе нашей строки при помощи функции `print()` у нас вначале первой строки образовался отступ. Этот отступ (табуляция) и был определён специальным символом `\t`.

## 3.4.3. Отсутствие символов образующих спецсимволы `/другое`

А теперь в нашей строке уберём из спецсимвола `\t` символ `t` и посмотрим, что у нас получится:

```python
>>> t = "\panda needs\npython"
>>> t
'\\panda needs\npython'
>>> print(t)
\panda needs
python
>>>
```

В данном случае сработала следующая схема:

- `/другое` (где `другое` - это не спецсимвол) - если символ после обратного слэша не соответствует ни одному из символов образующих спецсимволы, то `\` не является экранирующим символом, а является просто обратным слэшем.

Но в таких случаях нужно быть осторожным.

## 3.4.4. Экранирование символов

Например, в строке `"panda \needs\ python"` мы захотели заключить слово `needs` в обратные слэши:

```python
>>> t = "panda \needs\ python"
>>> t
'panda \needs\\ python'
>>> print(t)
panda 
eeds\ python
>>>
```

Из вывода функции `print()` можно сделать вывод, что первый обратный слэш и последующая буква `n` образовали символ переноса строки `\n` и мы получили не то, что ожидали.

Поэтому лучше всегда, когда вы хотите добавить в строчку обратный слэш, лучше использовать два обратных слэша `\\`.

Тогда эту строку нужно записать в таком виде:

```python
>>> t = "panda \\needs\\ python"
>>> t
'panda \\needs\\ python'
>>> print(t)
panda \needs\ python
>>>
```

Теперь всё получилось как нам и хотелось.

Спецсимвол `\\` гарантированно будет символом обратного слэша, какие бы символы после него не шли.

Такой подход называется экранированием.

**Экранирование** - запись символов с двойным назначением с добавлением перед ними обратного слэша.

Часто запись `\\` используется для записи путей к файлу в ОС Windows.

Например:

`D:\Python\Projects\test.py`

Присвоим переменной `path` это значение:

```python
>>> path = "D:\Python\Projects\test.py"
>>> print(path)
D:\Python\Projects  est.py
>>>
```

Как видите в переменной `path` путь до файла `test.py` оказался нарушенным.

Чтобы в строке правильно использовать такой маршрут необходимо как раз использовать экранирование обратных слэшей (В Linux и MacOS это выполнять не нужно):

```python
>>> path = "D:\\Python\\Projects\\test.py"
>>> print(path)
D:\Python\Projects\test.py
>>>
```

Поэтому в Windows при записи того или иного маршрута всегда необходимо экранировать обратные слэши.

Ну, а тем кто пользуется Linux или MacOS, беспокоиться, в данном случае, не стоит.

Но это касается только путей, обратные слэши могут применяться и в других случаях и если вы их применяете, то используйте экранирование `\\` не зависимо от операционной системы.

Кроме обратного слэша экранировать следует и кавычки.

Например, у нас есть строка `"Марка сока "Ягодка""`, где слово `"Ягодка"` в двойных кавычках:

```python
>>> s = "Марка сока "Ягодка""
  File "<stdin>", line 1
    s = "Марка сока "Ягодка""
                     ^^^^^^
SyntaxError: invalid syntax
>>>
```

Ка видите произошла синтаксическая ошибка. Так делать нельзя, потому что двойные кавычки определяют где начинается и где заканчивается строка.

Но такую строку сформировать можно, для этого используется обратный слэш для экранирования символов с двойным назначением:

```python
>>> s = "Марка сока \"Ягодка\""
>>> s
'Марка сока "Ягодка"'
>>>
```

Тоже самое с одинарными кавычками:

```python
>>> s = 'Марка сока \'Ягодка\''
>>> s
"Марка сока 'Ягодка'"
>>>
```

Всё сработало правильно.

А если использовать разные кавычки, например:

```python
>>> s = 'Марка сока "Ягодка"'
>>> s
'Марка сока "Ягодка"'
>>>
```

то можно обойтись и без экранирования.

Но всё же хорошей практикой считается, что символы с двойным назначением внутри строки лучше всё-таки экранировать.

## 3.4.5. Сырые (raw) строки

И в конце занятия рассмотрим так называемые сырые (raw) строки.

**Сырые (raw) строки** - строки, в которых игнорируются спецсимволы и все символы воспринимаются буквально так, как они были написаны.

Например:

```python
>>> path = "D:\\Python\\Projects\\test.py"
>>> print(path)
D:\Python\Projects\test.py
>>>
```

Мы видим, что функция `print()` выводит строку с одинарными слэшами, не показывая символы экранирования.

Но эту обычную строку мы можем преобразовать в сырую строку - raw, для этого перед кавычками в значении строки добавим маленькую букву `r`:

```python
>>> path = r"D:\\Python\\Projects\\test.py"
>>> print(path)
D:\\Python\\Projects\\test.py
>>>
```

Теперь все символы воспринимаются так, как они были написаны. И двойные слэши выводятся как записывались - `\\`.

В таком случае правильно было бы записать маршрут так:

```python
>>> path = r"D:\Python\Projects\test.py"
>>> print(path)
D:\Python\Projects\test.py
>>>
```

На самом деле на практике часто используется такие raw строки.

На этом завершаем наше занятие.

Из этого занятия вы должны:

- хорошо себе представлять, что такое спецсимволы и экранирование символов;
- какие основные спецсимволы для строк существуют;
- как определяются сырые (raw) строки.
