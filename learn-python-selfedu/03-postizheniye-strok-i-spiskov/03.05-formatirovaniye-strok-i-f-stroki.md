# 3.5. Форматирование строк и F-строки

На этом занятии рассмотрим способы формирования строк на основе набора различных переменных.

Мвы уже знаем как создавать строки и соединять их между собой.

Допустим у нас есть две переменные:

```python
>>> age = 18
>>> name = "Сергей"
>>>
```

Предположим, что на основе этих данных мы хотим создать следующую строку:

```python
>>> "Меня зовут " + name + ", мне " + str(age) + " и я люблю язык Python"
'Меня зовут Сергей, мне 18 и я люблю язык Python'
>>>
```

Но как вы понимаете, такая конструкция не самый удобный способ формирования строк по щаблону. Гораздо удобнее использовать специальный метод строки `format()`.

## 3.5.1. Метод строки `format()`

**Метод `format()`** - форматирует указанные значения и вставляет их внутрь строки-заполнителя. Заполнитель определяется с помощью фигурных скобок: `{}`. Метод `format()` возвращает отформатированную строку.

Синтаксис:

```python
string.format(value1, value2...)
```

Обязательные аргументы:

`value1, value2...` - Одно или несколько значений, которые необходимо отформатировать и вставить в строку. Значения представляют собой либо список значений, разделенных запятыми, либо список ключ=значение, либо их комбинацию. Значения могут быть любого типа данных.

Как можно использовать метод `format()`?

Рассмотрим это на примере нашей строки. Скопируем её, а затем поправим до такого вида:

```python
>>> 'Меня зовут {0}, мне {1} и я люблю язык Python'.format(name, age)
'Меня зовут Сергей, мне 18 и я люблю язык Python'
>>>
```

На выходе у нас получилась та же самая строка.

В данном случае, вместо `{0}` была подставлена первая переменная `name`, т.е. первая переменная имеет индекс 0, а перемменная `age` имеет индекс 1, поэтому она была подставлена вместо `{1}`.

Мы видим, что метод `format()` возвращает новую строку отформатированную по заданному шаблону.

Разумеется, если мы хотим сохранить результат работы метода `format()`, нужно просто присвоить результаты его работы некой переменной, например `msg`:

```python
>>> msg = 'Меня зовут {0}, мне {1} и я люблю язык Python'.format(name, age)
>>> msg
'Меня зовут Сергей, мне 18 и я люблю язык Python'
>>>
```

Теперь переменная `msg` ссылается на эту новую сформированную строку. Причём строка формируется на основе переменных `name` и `age`.

Как вы понимаете метод формат использовать гораздо удобнее чем такую конструкцию `"Меня зовут " + name + ", мне " + str(age) + " и я люблю язык Python"`.

Мало того мы при использовании метода `format()` можем использовать несколько раз наши переменные.

Например:

```python
>>> msg = 'Меня зовут {0}, мне {1} и я люблю язык Python. {0}'.format(name, age)
>>> msg
'Меня зовут Сергей, мне 18 и я люблю язык Python. Сергей'
>>>
```

Т.е. метод `format()` обеспечивает нас достаточной гибкостью для того чтобы формировать  совершенно разнообразные строки по заданном шаблону.

Также в этом методе можно использовать несколько другой синтаксис, где используются не индексы, а ключи переменных:

```python
>>> msg = 'Меня зовут {fio}, мне {old} и я люблю язык Python. {fio}'.format(fio=name, old=age)
>>> msg
'Меня зовут Сергей, мне 18 и я люблю язык Python. Сергей'
>>>
```

И использовать эти ключи ещё удобнее, ведь глядя на строку мы сразу видим, что означают переменные.

Но здесь следует быть внимательным, так например если мы вместо ключа `fio` используем имя переменной `name`:

```python
>>> msg = 'Меня зовут {name}, мне {old} и я люблю язык Python. {fio}'.format(fio=name, old=age)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
KeyError: 'name'
>>>
```

то получим ошибку, потому что такого ключа `name` не существует.

## 3.5.2. `F-строки`

Начиная с версии Python 3.6 появился ещё более удобный способ формирования строк - `f-строки`.

На этом занятии рассмотрим лишь основы подхода этого способа.

Для более подробного изучения можно углубиться в специальный формат, он называется [PEP 498](https://peps.python.org/pep-0498/ "PEP 498 - Literal String Interpolation").

Чтобы Python воспринимал строку как `f-строку` перед её определением следует записать такой символ - `f`, а на месте переменных записать их имена в фигурных скобках `{}`:

```python
>>> f'Меня зовут {name}, мне {age} и я люблю язык Python'
'Меня зовут Сергей, мне 18 и я люблю язык Python'
>>>
```

Как видите, здесь уже не нужно вызывать какой-либо метод, указывать каких-либо ключей, сразу записываем нужные переменные и на выходе получаем нужную строку.

По моему мнению, такой подход самый удобный. И так думаю не только я, это мнение многих программистов. Поэтому если работают с Python версии 3.6 и выше, то обычно используют именно этот способ формирования строк - `f-строк`.

К тому же в фигурных скобках можно указывать не только переменные, но, практически, любые конструкции языка Python.

Например, в первых фигурных скобках к переменной мы можем применить метод `upper()`, а во вторых - переменную умножить на два:

```python
>>> f'Меня зовут {name.upper()}, мне {age * 2} и я люблю язык Python'
'Меня зовут СЕРГЕЙ, мне 36 и я люблю язык Python'
>>>
```

Здесь мы видим, что имя прописано в верхнем регистре, а переменная `age` умножена на два.

Или мы можем вызвать функцию `len()` для получения длины строки:

```python
>>> f'Меня зовут {len(name)}, мне {age * 2} и я люблю язык Python'
'Меня зовут 6, мне 36 и я люблю язык Python'
>>>
```

И снова получим нужную строку, где `6` - длина строки содержащей слово `"Сергей"`.

Как видите, `f-строки` являются наиболее удобным и простым способом формирования шаблонных строк.

Теперь вы можете использовать `f-строки` если ваш интерпретатор Python версии 3.6 и выше. И использовать метод `format()` - если ниже.
