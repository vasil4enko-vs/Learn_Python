# 1.3. Установка Python - pyenv

## 1.3.1. pyenv - что такое и как установить

Если Вы используете Linux, то у Вас, скорее всего, в системе изначально будет установлен Python. Но в данном случае Вы можете столкнуться с Python второй версии или уже третьей, но не самой актуальной. К тому же для работы в разных проектах Вам могут
понадобиться различные версии интерпретатора Python.

В некоторых дистрибутивах Linux можно установить Python при помощи пакетного менеджера. Но доступны будут
только поддерживаемые сопровождающими репозиториев версии. А это не всегда может нас устроить.

Также при работе с разными проектами могут понадобиться разные версии Python для разных проектов и желательно их использовать не изменяя системную версию Python.

Поэтому начнём с правильной установки интерпретатора Python.

Перечисленные выше проблемы решает простой менеджер версий [**pyenv**](https://github.com/pyenv/pyenv "pyenv на Github").

**pyenv** - инструмент, позволяющий легко переключаться между несколькими версиями Python. Это просто, ненавязчиво и следует традициям UNIX, в смысле, один инструмент хорошо справляется с одной задачей.

Что же может делать pyenv:

- Позволяет изменить глобальную версию Python для каждого пользователя.
- Обеспечивает возможность определения версии Python для каждого проекта.
- Позволяет переопределить версию Python с помощью переменной среды.
- Ищет команды из нескольких версий Python одновременно. Это может быть полезно для тестирования разных версий Python с помощью [**tox**](https://github.com/tox-dev/tox "tox на Github").

В общем, отличный менеджер версий Python, позволяющий решить, практически, все наши проблемы.

Для начала установим pyenv.

Нужно отметить, что pyenv имеет хорошую [документацию](https://github.com/pyenv/pyenv#table-of-contents "Документация pyenv"), в которой описывается несколько способов установки pyenv. Мы же используем самый удобный, на мой взгляд, путь - используем автоматический установщик [pyenv installer](https://github.com/pyenv/pyenv-installer "pyenv installer на Github").

Для этого необходимо установить зависимости необходимые для компиляции Python именно для вашего [дистрибутива](https://github.com/pyenv/pyenv/wiki/Common-build-problems#prerequisites "Зависимости (Смотреть для своего дистрибутива)")

После чего нам нужно выполнить лишь одну команду в консоли:

```bash
$ curl https://pyenv.run | bash
$
```

Ну, а последнее действие, настройка вашей командной оболочки (shell) для pyenv. Сделать это можно одним из способов указанным в [документации pyenv](https://github.com/pyenv/pyenv#set-up-your-shell-environment-for-pyenv "Настройка командной оболочки (shell) для pyenv").

## 1.3.2. Использование pyenv

Мы рассмотрим только те аспекты использования pyenv, которые нам будут необходимы в нашей работе.

Для начала проверим доступные версии Python:

```bash
$ pyenv versions
* system (set by /home/user/.pyenv/version)
$
```

Мы видим, что у нас установленна всего лишь одна версия Python, которая является общесистемной. Звёздочка `*` в начале строки указывает на то, что именно эта версия является активной.

Проверим версию системного Python:

```bash
$ python -V
Python Python 3.11.3
$
```

Теперь нам нужно узнать список доступных для установки версий Python:

```bash
$ pyenv install -l
2.1.3
2.2.3
2.3.7
2.4.0
2.4.1
...
3.11.0
3.11-dev
3.11.1
3.11.3
3.11.4
3.12.0a5
3.12-dev
...
stackless-3.4.7
stackless-3.5.4
stackless-3.7.5
$
```

Как видите, в результате выполнения этой команды мы получим очень внушительный список.

Установим, к примеру, версию Python 3.11.4:

```bash
$ pyenv install 3.11.4
$
```

После скачивания и компиляции, указанная нами версия Python ,будет установлена в директорию ~/.pyenv/versions/3.11.4.

Снова проверим доступные версии Python:

```bash
$ pyenv versions
* system (set by /home/user/.pyenv/version)
3.11.4
$
```

Как видим теперь к системной версии прибавилась и установленная нами *3.11.4*. Но, как видим (по звёздочке), активной по прежнему остаётся системная - *Python 3.11.3*.

Конечно pyenv позволяет изменить версию Python глобально, но мы этого делать не будем. Изменим версию Python в директории нашего проекта.

Для этого перейдём в каталог нашего проекта:

```bash
$ cd ~/Projects/Learn_Python/
$
```

И узнаем локальную версию Python в директории проекта:

```bash
$ pyenv local
pyenv: no local version configured for this directory
$
```

pyenv заботливо подскажет, что локальная версия не установлена:

Следовательно у нас и тут должна быть активной системная версия.

Удостоверимся в этом:

```bash
$ python -V
Python Python 3.11.3
$
```

Активизируем нужную нам версию Python локально для нашего проекта:

```bash
$ pyenv local 3.11.4
$
```

После выполнения этой команды в корневой директории проекта появится скрытый файл *.python-version* со следующим содержанием:

```text
3.11.3
```

Перезапустим нашу командную оболочку и посмотрим локальную версию Python:

```bash
$ pyenv local
3.11.4
$
```

Другой способ проверки:

```bash
$ python -V
Python 3.11.4
$
```

Ну и на последок проверим не изменилась ли наша системная версия Python после наших манипуляций. Для этого перейдите в домашнюю директорию своего пользователя:

```bash
$ cd ~
$
```

и выполните команду:

```bash
$ python -V
Python 3.11.3
$
```

Если так, то вы всё сделали правильно и можете использовать установленную версию Python 3.11.4 в своём проекте не изменив общесистемную версию.

Более детально освоить pyenv Вы можете изучив [документацию](https://github.com/pyenv/pyenv#usage "Использование pyenv") этого инструмента.

Также вы можете воспользоваться удобным справочником команд pyenv - [Command Reference](https://github.com/pyenv/pyenv/blob/master/COMMANDS.md "Справочник команд pyenv")

Ну, а теперь выполним небольшое задание. И если у Вас всё получилось, Python установлен правильно, то оно для вас сложным не будет.

Откройте консоль перейдите в директорию с нашим проектом запустите интерактивный интерпретатор Python командой

```bash
$ python
Python 3.11.4 (main, Jun 21 2023, 20:33:35) [GCC 13.1.1 20230429] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

и выполните простые арифметические действия:

```python
>>> 3 + 5
8
>>> 3 * 5
15
>>> 8 / 6
1.3333333333333333
```

Не забудьте нажимать клавишу `Enter` для получения результатов.

Если Python уверенно выдаёт правильные ответы, можете присоединиться к моим поздравлениям и поздравить себя с выполнением 1-го задания.

Краткие итоги занятия:

1. Вы узнали для чего нужен менеджер версий **pyenv**.

2. Вы научились:

    - вызывать список доступных для pyenv версий Python для выбора нужной;
    - устанавливать, при помощи pyenv, нужную версию Python;
    - активировать для Вашего проекта локально, при помощи всё того же pyenv, установленную ранее версию Python.
