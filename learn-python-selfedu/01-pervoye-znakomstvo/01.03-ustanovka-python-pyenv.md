# 1.3. Установка Python - pyenv

## 1.3.1. pyenv - что такое и как установить

Если Вы используете Linux, то у Вас, скорее всего, в системе изначально будет установлен Python. Но в данном случае Вы можете столкнуться с Python второй версии или уже третьей, но не самой актуальной. К тому же для работы в разных проектах Вам могут
понадобиться различные версии интерпретатора Python.

В некоторых дистрибутивах Linux можно установить Python при помощи пакетного менеджера. Но доступны будут
только поддерживаемые сопровождающими репозиториев версии. А это не всегда может нас устроить.

Также при работе с разными проектами могут понадобиться разные версии Python для разных проектов и желательно их использовать не изменяя системную версию Python.

Поэтому начнём с правильной установки интерпретатора Python.

Перечисленные выше проблемы решает простой менеджер версий [**pyenv**](https://github.com/pyenv/pyenv "pyenv на Github").

**pyenv** - инструмент, позволяющий легко переключаться между несколькими версиями Python. Это просто, ненавязчиво и следует традициям UNIX, в смысле, один инструмент хорошо справляется с одной задачей.

Что же может делать pyenv:

- Позволяет изменить глобальную версию Python для каждого пользователя.
- Обеспечивает возможность определения версии Python для каждого проекта.
- Позволяет переопределить версию Python с помощью переменной среды.
- Ищет команды из нескольких версий Python одновременно. Это может быть полезно для тестирования разных версий Python с помощью [**tox**](https://github.com/tox-dev/tox "tox на Github").

В общем, отличный менеджер версий Python, позволяющий решить, практически, все наши проблемы.

Для начала установим pyenv.

Нужно отметить, что pyenv имеет хорошую [документацию](https://github.com/pyenv/pyenv#table-of-contents "Документация pyenv"), в которой описывается несколько способов установки pyenv. Мы же используем самый удобный, на мой взгляд, путь - используем автоматический установщик [pyenv installer](https://github.com/pyenv/pyenv-installer "pyenv installer на Github").

Для этого необходимо установить зависимости необходимые для компиляции Python именно для вашего [дистрибутива](https://github.com/pyenv/pyenv/wiki/Common-build-problems#prerequisites "Зависимости (Смотреть для своего дистрибутива)")

После чего нам нужно выполнить лишь одну команду в консоли:

```bash
curl https://pyenv.run | bash
```

Ну, а последнее действие, настройка вашей командной оболочки (shell) для pyenv. Сделать это можно одним из способов указанным в [документации pyenv](https://github.com/pyenv/pyenv#set-up-your-shell-environment-for-pyenv "Настройка командной оболочки (shell) для pyenv").

## 1.3.2. Использование pyenv

Мы рассмотрим только те аспекты использования pyenv, которые нам будут необходимы в нашей работе.

Для начала проверим доступные версии Python:

```bash
pyenv versions
```

Вывод команды:

```bash
* system (set by /home/scyth1an/.pyenv/version)
```

Мы видим, что у нас установленна всего лишь одна версия Python, которая является общесистемной. Звёздочка "\*" в начале строки указывает на то, что именно эта версия является активной.

Проверим версию системного Python:

```bash
python -V
```

Мой вывод:

```python
Python 3.10.10
```

Теперь нам нужно узнать список доступных для установки версий Python:

```bash
pyenv install -l
```

В результате выполнения этой команды мы получим очень внушительный список.

Приведу полученный мною список версий, для удобства, с сокращениями:

```bash
2.1.3
2.2.3
2.3.7
2.4.0
2.4.1
...
3.11.0
3.11-dev
3.11.1
3.11.3
3.12.0a5
3.12-dev
...
stackless-3.4.7
stackless-3.5.4
stackless-3.7.5
```

Установим, к примеру, версию Python 3.11.3:

```bash
pyenv install 3.11.3
```

После скачивания и компиляции, указанная нами версия Python ,будет установлена в директорию ~/.pyenv/versions/3.11.3.

Снова проверим доступные версии Python:

```bash
pyenv versions
```

Вывод:

```python
* system (set by /home/scyth1an/.pyenv/version)
3.11.3
```

Как видим теперь к системной версии прибавилась и установленная нами *3.11.3*. Но, как видим (по звёздочке), активной по прежнему остаётся системная - *3.10.10*.

Конечно pyenv позволяет изменить версию Python глобально, но мы этого делать не будем. Изменим версию Python в директории нашего проекта.

Для этого перейдём в каталог нашего проекта:

```bash
cd ~/Projects/Learn_Python/
```

И узнаем локальную версию Python в директории проекта:

```bash
pyenv local
```

pyenv заботливо подскажет, что локальная версия не установлена:

```bash
pyenv: no local version configured for this directory
```

Следовательно у нас и тут должна быть активной системная версия.

Удостоверимся в этом:

```bash
python -V
```

Получим (в моём случае):

```python
Python 3.10.10
```

Активизируем нужную нам версию Python локально для нашего проекта:

```bash
pyenv local 3.11.3
```

После выполнения этой команды в корневой директории проекта появится скрытый файл *.python-version* со следующим содержанием:

```python
3.11.3
```

Перезапустим нашу командную оболочку и посмотрим локальную версию Python:

```bash
pyenv local
```

Теперь в директории проекта есть своя локальная версия, не влияющая на систему за приделами проекта:

```python
3.11.3
```

Другой способ проверки:

```bash
python -V
```

Результат тот же:

```python
Python 3.11.3
```

Ну и на последок проверим не изменилась ли наша системная версия Python после наших манипуляций. Для этого перейдите в домашнюю директорию своего пользователя:

```bash
cd ~
```

и выполните команду:

```python
python -V
```

Вы должны получить вывод:

```python
Python 3.10.10
```

Если так, то Вы всё сделали правильно и можете использовать установленную версию Python 3.11.3 в своём проекте не изменив общесистемную версию.

Более детально освоить pyenv Вы можете изучив [документацию](https://github.com/pyenv/pyenv#usage "Использование pyenv") этого инструмента.

Также вы можете воспользоваться удобным справочником команд pyenv - [Command Reference](https://github.com/pyenv/pyenv/blob/master/COMMANDS.md "Справочник команд pyenv")

Ну, а теперь выполним небольшое задание. И если у Вас всё получилось, Python установлен правильно, то оно для вас сложным не будет.

Откройте консоль перейдите в директорию с нашим проектом запустите интерактивный интерпретатор Python командой

```bash
python
```

и выполните простые арифметические действия:

```python
3 + 5
3 * 5
8 / 6
```

Не забудьте нажимать клавишу "Enter" для получения результатов.

Если Python уверенно выдаёт правильные ответы, можете присоединиться к моим поздравлениям и поздравить себя с выполнением 1-го задания.

Краткие итоги занятия:

1. Вы узнали для чего нужен менеджер версий **pyenv**.

2. Вы научились:

    - вызывать список доступных для pyenv версий Python для выбора нужной;
    - устанавливать, при помощи pyenv, нужную версию Python;
    - активировать для Вашего проекта локально, при помощи всё того же pyenv, установленную ранее версию Python.
