# 5.4. Примеры работы оператора цикла `for`. Функция `enumerate`

Мы продолжаем знакомиться с оператором цикла `for` языка Python. Сегодня мы с вами рассмотрим несколько примеров использования цикла `for` при решении разных задач.

## 5.4.1. Вычисление факториала натурального числа

И первая задача - вычислить факториал от натурального числа. Пусть пользователь вводит натуральное целое число `n`, а наша программа должна выдать значение его факториала. Программа будет выглядеть следующим образом (файл `05.04.01.py`):

```python
n = int(input("Введите натуральное число не более 100: "))

if n < 1 or n > 100:
    print("Неверно введено натуральное число.")
else:
    p = 1
    for i in range(1, n + 1):
        p *= i
    
    print(f"Факториал {n}! = {p}")
```

Запустим эту программу и посмотрим, что у нас получится. Для начала введём неправильное число, например `-5`:

```python
Неверно введено натуральное число.
```

Ещё раз запустим программу и, в этот раз, введём правильное число, например `6`:

```python
Факториал 6! = 720
```

Задача решена верно. Вот так можно реализовать программу для вычисления факториала натурального числа.

## 5.4.2. Построение "ёлочки"

Следующая наша программа будет рисовать такую "ёлочку":

```python
*
**
***
****
*****
******
```

Сделать это достаточно просто (файл `05.04.02.py`):

```python
for i in range(1, 7):
    print("*" * i)
```

Выполним программу:

```python
*
**
***
****
*****
******
```

и действительно видим нужную нам "ёлочку".

Видите как легко и просто реализовать эту задачу используя оператор цикла `for` и оператор работы со строками `*`.

Так что всё что мы проходим нужно запоминать и использовать по мере необходимости.

## 5.4.3. Объединение слов

Теперь перейдём к третей задаче.

Допустим, у нас есть такой список из слов:

```python
words = ["Python", "дай", "мне", "силы", "пройти", "этот", "курс", "до", "конца"]
```

и мы хотели бы объединить все эти слова в одну строку.

С помощью цикла `for` это можно сделать таким образом(файл `05.04.03.01.py`):

```python
words = ["Python", "дай", "мне", "силы", "пройти", "этот", "курс", "до", "конца"]
s = ""

for w in words:
    s += " " + w

print(s)
```

Запустим программу:

```python
 Python дай мне силы пройти этот курс до конца
```

Мы получили нужную нам строку, но в начале строки у нас есть пробел, что не очень-то хорошо. Избавиться от него можно с помощью метода `lstrip()` (файл `05.04.03.02.py`):

```python
words = ["Python", "дай", "мне", "силы", "пройти", "этот", "курс", "до", "конца"]
s = ""

for w in words:
    s += " " + w

print(s.lstrip())
```

Снова запустим программу:

```python
Python дай мне силы пройти этот курс до конца
```

Теперь мы видим, что пробела в начале строки нет.

Можно не пользоваться методом `lstrip()` и сделать это вручную (файл `05.04.03.03.py`):

```python
words = ["Python", "дай", "мне", "силы", "пройти", "этот", "курс", "до", "конца"]
s = ""
fl_first = True

for w in words:
    s += ("" if fl_first else " ") + w
    fl_first = False

print(s)
```

Результатом выполнения программы будет:

```python
Python дай мне силы пройти этот курс до конца
```

Здесь, для первого слова `Python`, `fl_first` будет иметь значение `True` и тернарный оператор вернёт пустую строку. Далее, `fl_first` будет присвоено значение `False` и уже будет срабатывать оператор `else`, соответственно, тернарный оператор будет возвращать пробелы и мы получим нужный нам результат.

Но такая программа  (файл `05.04.03.03.py`) выглядит более "коряво" по сравнению с предыдущим вариантом (`05.04.02.py`) и к тому же работает медленнее.

Так что если вам нужно удалить какие-нибудь пробелы, переводы строк в начале-конце строк, то лучше использовать соответствующие строковые методы.

Но всё это можно сделать и гораздо проще, с помощью знакомого нам метода `join()` и использованием f-строки (`05.04.03.04.py`):

```python
words = ["Python", "дай", "мне", "силы", "пройти", "этот", "курс", "до", "конца"]

print(" ".join(f"{w}" for w in words))
```

Или ещё короче и проще (`05.04.03.05.py`):

```python
words = ["Python", "дай", "мне", "силы", "пройти", "этот", "курс", "до", "конца"]

print(" ".join(words))
```

Последний вариант решения этой задачи (`05.04.03.05.py`) самый короткий и простой, к тому же он будет работать гораздо быстрее чем `for`.

Надеюсь с этой задачей всё понятно.

## 5.4.4. Замена двузначных чисел нулями

Следующая задача такая. Допустим мы имеем такой список с числами:

```python
digs = [4, 3, 100, -53, -30, 1, 34, -8]
```

и здесь все двузначные числа нужно заменить нулями.

Используя знания, что у нас сейчас есть это можно сделать так (файл `05.04.04.py`):

```python
digs = [4, 3, 100, -53, -30, 1, 34, -8]

for i in range(len(digs)):
    if 10 <= abs(digs[i]) <= 99:
        digs[i] = 0

print(digs)
```

Запустим нашу программу:

```python
[4, 3, 100, 0, 0, 1, 0, -8]
```

Как видите, все двузначные числа заменены нулями.

**Обратите внимание:** чтобы в цикле изменить элементы списка, мы должны перебирать индексы и обращаться к i-тому элементу по его индексу. Только так можно изменить значение текущего элемента в уже существующем списке. К тому же, в этой задаче, нам были нужны и индексы элементов списка `i`, и их значения `digs[i]`.

Чтобы из какого-либо итерируемого объекта сразу брать и индекс, и значение в Python существует специальная функция `enumerate()`.

## 5.4.5. Функция `enumerate()`

**Функция `enumerate()`** - принимает коллекцию (например, кортеж) и возвращает ее как перечисляемый объект. Функция `enumerate()` добавляет счетчик в качестве ключа объекта перечисления. Т.е. возвращает индекс и значение.

Синтаксис:

```python
enumerate(iterable, start)
```

`iterable` - итерируемый объект;

`start` - начальный индекс, определение начального индекса объекта перечисления. По умолчанию `0`.

Используя функцию `enumerate()` переписать наш пример (файл `05.04.04.py`) можно следующим образом (файл `05.04.05.py`):

```python
digs = [4, 3, 100, -53, -30, 1, 34, -8]

for i, d in enumerate(digs):
    if 10 <= abs(d) <= 99:
        digs[i] = 0

print(digs)
```

Запустим эту программу:

```python
[4, 3, 100, 0, 0, 1, 0, -8]
```

Как видите, результат получился точно такой же, как и в предыдущем варианте.

Но такая реализация цикла `for` выглядит более читабельной и удобной.

## 5.4.6. Преобразование кириллицы в латиницу

И последний пример который мы рассмотрим на этом занятии - это преобразование кириллицы в латиницу. Такая задача иногда возникает при создании сайтов. Например такую программу можно использовать для преобразования заголовка статьи в URL-адрес.

Рассмотрим как это сделать.

Вначале определим список замен для соответствующих русских букв (по алфавиту от а до я), затем определим вспомогательную переменную `start_index = ord('а')`, далее две вспомогательные переменные `title` и `slug`, а само преобразование мы сделаем в цикле (файл `05.04.06.py`):

```python
t = [
    "a",
    "b",
    "v",
    "g",
    "d",
    "e",
    "zh",
    "z",
    "i",
    "y",
    "k",
    "l",
    "m",
    "n",
    "o",
    "p",
    "r",
    "s",
    "t",
    "u",
    "f",
    "h",
    "c",
    "ch",
    "sh",
    "shch",
    "",
    "y",
    "",
    "e",
    "yu",
    "ya",
]
start_index = ord("а")  # noqa: RUF001
title = "Программирование на Python - лучший курс"
slug = ""

for s in title.lower():
    if "а" <= s <= "я":  # noqa: RUF001
        slug += t[ord(s) - start_index]
    elif s == "ё":
        slug += "yo"
    elif s in " !?;:.,":
        slug += "-"
    else:
        slug += s

print(slug)
```

Запустим код:

```python
programmirovanie-na-python---luchshiy-kurs
```

Результат вполне читаемый, но некрасиво выглядят три дефиса подряд `---`.

Попробуем исправить этот момент - заменим два и более дефисов на один (файл `05.04.07.py`):

```python
t = [
    "a",
    "b",
    "v",
    "g",
    "d",
    "e",
    "zh",
    "z",
    "i",
    "y",
    "k",
    "l",
    "m",
    "n",
    "o",
    "p",
    "r",
    "s",
    "t",
    "u",
    "f",
    "h",
    "c",
    "ch",
    "sh",
    "shch",
    "",
    "y",
    "",
    "e",
    "yu",
    "ya",
]
start_index = ord("а")
title = "Программирование на Python - лучший курс"
slug = ""

for s in title.lower():
    if "а" <= s <= "я":
        slug += t[ord(s) - start_index]
    elif s == "ё":
        slug += "yo"
    elif s in " !?;:.,":
        slug += "-"
    else:
        slug += s

while slug.count("--"):
    slug = slug.replace("--", "-")

print(slug)
```

Запустим нашу программу:

```python
programmirovanie-na-python-luchshiy-kurs
```

Теперь у нас везде идёт ао одному дефису.

Конечно, это не самая лучшая реализация решения этой задачи, лучше её делать с использованием регулярных выражений.

Но учитывая уровень ваших знаний на этот момент, она очень хорошо вписывается в этот урок.
